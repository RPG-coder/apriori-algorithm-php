<?php session_start(); $_SESSION['logged'] = FALSE; /* -- SQL Config -- */ $servername = "localhost"; $username = "root"; $password = "root123"; $dbname = "cs634dmadmin"; /* -- Validate Authorization Here -- */ /* Create sql connection */ $conn = new mysqli($servername, $username, $password, $dbname); if ($conn->connect_error) { echo "Signin Unsucessful!! Cannot connect to MySQL. Please do proper setup of XAAMP again.<br/>Redirecting to Home page in 5 seconds."; header("refresh: 5;url=./index.php"); }else{ /* Validating user credentials in `User_DB` (or Transaction_DB)*/ $sql = "SELECT username FROM user_credentials WHERE username='".$_POST['si_username']."' AND password='".$_POST['si_password']."'"; $result = $conn->query($sql); if ($result->num_rows > 0) { $row=$result->fetch_assoc(); $conn->close(); /* Creating a Login session*/ $_SESSION['User_DB'] = "cs634DM_".$row['username']."_DB"; $_SESSION['username'] = $row['username']; $_SESSION['logged'] = TRUE; $_SESSION['cart'] = array(); echo "Login Sucessful!! Redirecting to Shopping Page in 5 seconds."; header("refresh: 5;url=./shopping.php"); } if($_SESSION['logged'] !== TRUE){ echo "Signin Unsucessful!! Invalid username or password<br/>Redirecting to Shopping Page in 5 seconds."; header("refresh: 5;url=./index.php"); } }?>